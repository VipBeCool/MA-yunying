<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é£é™©é¢„è­¦ - æ™ºèƒ½è¥é”€å¹³å°</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .sidebar {
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
        }

        .nav-item.active {
            background: rgba(82, 196, 26, 0.2);
            border-left-color: #52c41a;
        }

        .logo-icon {
            background: #52c41a;
        }

        /* é¢„è­¦å¡ç‰‡ */
        .alert-card {
            padding: 16px 20px;
            border-radius: 10px;
            margin-bottom: 12px;
            border-left: 4px solid;
            transition: all 0.2s;
        }

        .alert-card:hover {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .alert-card.high {
            background: #fff2f0;
            border-left-color: #ff4d4f;
        }

        .alert-card.medium {
            background: #fffbe6;
            border-left-color: #faad14;
        }

        .alert-card.low {
            background: #f6ffed;
            border-left-color: #52c41a;
        }

        /* æ¨é€çŠ¶æ€æ ‡ç­¾ */
        .push-status {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: 500;
        }

        .push-status.not-pushed {
            background: #f0f0f0;
            color: #8c8c8c;
        }

        .push-status.pushed {
            background: #d9f7be;
            color: #389e0d;
        }

        /* é“¶è¡Œå¤„ç†åé¦ˆ */
        .bank-feedback {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: 500;
        }

        .bank-feedback.pending {
            background: #fff7e6;
            color: #d48806;
        }

        .bank-feedback.processed {
            background: #d9f7be;
            color: #389e0d;
        }

        .bank-feedback.paused {
            background: #fff2f0;
            color: #cf1322;
        }

        /* Toast */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #52c41a;
            color: #fff;
            padding: 12px 24px;
            border-radius: 8px;
            z-index: 9999;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* è”åŠ¨çŠ¶æ€é¢æ¿ */
        .sync-panel {
            background: linear-gradient(135deg, #e6f7ff 0%, #bae7ff 100%);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .sync-panel-title {
            font-weight: 600;
            color: #096dd9;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .sync-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            font-size: 13px;
            border-bottom: 1px solid rgba(24, 144, 255, 0.1);
        }

        .sync-item:last-child {
            border-bottom: none;
        }

        .sync-org {
            color: #262626;
            font-weight: 500;
        }

        .sync-stats {
            display: flex;
            gap: 12px;
            color: #595959;
        }
    </style>
</head>

<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="sidebar-logo">
                <div class="logo-icon">âš™ï¸</div>
                <h1>è¿è¥ç®¡æ§å°</h1>
            </div>
            
            <nav class="nav-menu">
                <a href="index.html" class="nav-item "><span class="nav-icon">ğŸ“Š</span><span class="nav-text">è¿è¥æ¦‚è§ˆ</span></a>
                
                <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 8px 16px;"></div>
                <div style="font-size: 12px; color: rgba(255,255,255,0.45); padding: 8px 24px; margin-top: 4px;">æ•°æ®äº¤ä»˜</div>
                <a href="smart-search.html" class="nav-item "><span class="nav-icon">ğŸ¯</span><span class="nav-text">æ™ºèƒ½æ¢å®¢</span></a>
                <a href="batch-enrich.html" class="nav-item "><span class="nav-icon">ğŸ“‘</span><span class="nav-text">æ‰¹é‡ç”»åƒæŸ¥è¯¢</span></a>
                
                <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 8px 16px;"></div>
                <div style="font-size: 12px; color: rgba(255,255,255,0.45); padding: 8px 24px; margin-top: 4px;">ä¸šåŠ¡ç®¡ç†</div>
                <a href="institutions.html" class="nav-item "><span class="nav-icon">ğŸ›ï¸</span><span class="nav-text">æœºæ„ç®¡ç†</span></a>
                <a href="customer-pool.html" class="nav-item "><span class="nav-icon">ğŸŠ</span><span class="nav-text">å®¢æˆ·æ± </span></a>
                <a href="products.html" class="nav-item "><span class="nav-icon">ğŸ“¦</span><span class="nav-text">äº§å“é…ç½®</span></a>
                <a href="rules.html" class="nav-item "><span class="nav-icon">ğŸ¯</span><span class="nav-text">è§„åˆ™å¼•æ“</span></a>
                <a href="distribution.html" class="nav-item "><span class="nav-icon">ğŸ”€</span><span class="nav-text">åˆ†å‘ç®¡ç†</span></a>
                <a href="analytics.html" class="nav-item "><span class="nav-icon">ğŸ“ˆ</span><span class="nav-text">æ•ˆæœåˆ†æ</span></a>
                <a href="billing.html" class="nav-item "><span class="nav-icon">ğŸ’°</span><span class="nav-text">æ”¶è´¹ç»“ç®—</span></a>
                <a href="reconciliation.html" class="nav-item "><span class="nav-icon">ğŸ“‘</span><span class="nav-text">å¯¹è´¦ç®¡ç†</span></a>
                <a href="risk-alert.html" class="nav-item active"><span class="nav-icon">âš ï¸</span><span class="nav-text">é£é™©é¢„è­¦</span></a>
                
                <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 8px 16px;"></div>
                <div style="font-size: 12px; color: rgba(255,255,255,0.45); padding: 8px 24px; margin-top: 4px;">ç³»ç»Ÿé…ç½®</div>
                <a href="api-monitor.html" class="nav-item "><span class="nav-icon">ğŸ”Œ</span><span class="nav-text">APIç›‘æ§</span></a>
                <a href="downloads.html" class="nav-item "><span class="nav-icon">ğŸ“¥</span><span class="nav-text">ä¸‹è½½ä¸­å¿ƒ</span></a>
            </nav>
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar" style="background: #52c41a;">ç®¡</div>
                    <div>
                        <div class="user-name">ç®¡ç†å‘˜</div>
                        <div class="user-role">å¹³å°è¿è¥</div>
                    </div>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <div class="page-header" style="display:flex;justify-content:space-between;align-items:center;">
                <div>
                    <h1 class="page-title">é£é™©é¢„è­¦</h1>
                    <p class="page-breadcrumb"><a href="index.html">è¿è¥æ¦‚è§ˆ</a> / é£é™©é¢„è­¦</p>
                </div>
                <div style="display:flex;gap:8px;">
                    <button class="btn btn-default btn-sm" onclick="markAllRead()">å…¨éƒ¨æ ‡ä¸ºå·²è¯»</button>
                    <button class="btn btn-primary btn-sm" onclick="pushAllToBank()">ğŸ“¤ ä¸€é”®æ¨é€æœªé€šçŸ¥é¢„è­¦</button>
                </div>
            </div>

            <!-- é¢„è­¦æ¦‚è§ˆ -->
            <div class="stat-cards">
                <div class="stat-card danger">
                    <div class="stat-label">é«˜é£é™©é¢„è­¦</div>
                    <div class="stat-value" id="statHigh">3<span class="stat-suffix">æ¡</span></div>
                    <div class="stat-trend" style="color:#ff4d4f;">éœ€ç«‹å³å¤„ç†</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-label">ä¸­é£é™©é¢„è­¦</div>
                    <div class="stat-value" id="statMedium">8<span class="stat-suffix">æ¡</span></div>
                    <div class="stat-trend" style="color:#faad14;">å»ºè®®å…³æ³¨</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-label">å·²æ¨é€è‡³é“¶è¡Œ</div>
                    <div class="stat-value" id="statPushed">3<span class="stat-suffix">æ¡</span></div>
                    <div class="stat-trend" style="color:#52c41a;">é“¶è¡Œå·²æ¥æ”¶</div>
                </div>
                <div class="stat-card primary">
                    <div class="stat-label">ç›‘æ§ä¼ä¸š</div>
                    <div class="stat-value">2,850<span class="stat-suffix">å®¶</span></div>
                    <div class="stat-trend">å·²æ¨é€æœªæ”¾æ¬¾</div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 16px;">
                <!-- é¢„è­¦åˆ—è¡¨ -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ğŸš¨ å®æ—¶é¢„è­¦</h3>
                        <span class="card-extra">
                            <button class="btn btn-text btn-sm" onclick="markAllRead()">å…¨éƒ¨æ ‡ä¸ºå·²è¯»</button>
                        </span>
                    </div>
                    <div id="alertList">
                        <!-- åŠ¨æ€æ¸²æŸ“ -->
                    </div>
                </div>

                <!-- å³ä¾§é¢æ¿ -->
                <div>
                    <!-- é“¶è¡Œç«¯è”åŠ¨çŠ¶æ€ -->
                    <div class="sync-panel">
                        <div class="sync-panel-title">ğŸ”— é“¶è¡Œç«¯è”åŠ¨çŠ¶æ€</div>
                        <div class="sync-item">
                            <span class="sync-org">æ±Ÿè‹é“¶è¡Œ</span>
                            <div class="sync-stats">
                                <span>æ¨é€ <strong>2</strong></span>
                                <span>å¾…å¤„ç† <strong style="color:#faad14;">1</strong></span>
                                <span>å·²å¤„ç† <strong style="color:#52c41a;">1</strong></span>
                            </div>
                        </div>
                        <div class="sync-item">
                            <span class="sync-org">å—äº¬é“¶è¡Œ</span>
                            <div class="sync-stats">
                                <span>æ¨é€ <strong>1</strong></span>
                                <span>å¾…å¤„ç† <strong style="color:#faad14;">1</strong></span>
                            </div>
                        </div>
                        <div class="sync-item">
                            <span class="sync-org">è‹å·å†œå•†è¡Œ</span>
                            <div class="sync-stats">
                                <span>æ¨é€ <strong>0</strong></span>
                                <span style="color:#8c8c8c;">æœªæ¨é€1æ¡</span>
                            </div>
                        </div>
                    </div>

                    <!-- é¢„è­¦ç±»å‹ç»Ÿè®¡ -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">ğŸ“Š é¢„è­¦ç±»å‹åˆ†å¸ƒ</h3>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f5f5f5; border-radius: 6px;">
                                <div>
                                    <div style="font-weight: 500;">å¸æ³•æ¶‰è¯‰</div>
                                    <div style="font-size: 12px; color: #8c8c8c;">è¢«æ‰§è¡Œäººã€è£åˆ¤æ–‡ä¹¦</div>
                                </div>
                                <div style="font-size: 20px; font-weight: 600; color: #ff4d4f;">5</div>
                            </div>
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f5f5f5; border-radius: 6px;">
                                <div>
                                    <div style="font-weight: 500;">å·¥å•†å˜æ›´</div>
                                    <div style="font-size: 12px; color: #8c8c8c;">æ³•äººã€è‚¡æƒã€ç»è¥èŒƒå›´</div>
                                </div>
                                <div style="font-size: 20px; font-weight: 600; color: #faad14;">3</div>
                            </div>
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f5f5f5; border-radius: 6px;">
                                <div>
                                    <div style="font-weight: 500;">è¡Œæ”¿å¤„ç½š</div>
                                    <div style="font-size: 12px; color: #8c8c8c;">ç¯ä¿ã€ç¨åŠ¡ã€å¸‚åœºç›‘ç®¡</div>
                                </div>
                                <div style="font-size: 20px; font-weight: 600; color: #faad14;">2</div>
                            </div>
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f5f5f5; border-radius: 6px;">
                                <div>
                                    <div style="font-weight: 500;">ç»è¥å¼‚å¸¸</div>
                                    <div style="font-size: 12px; color: #8c8c8c;">åˆ—å…¥å¼‚å¸¸åå½•</div>
                                </div>
                                <div style="font-size: 20px; font-weight: 600; color: #1890ff;">1</div>
                            </div>
                        </div>

                        <div
                            style="margin-top: 20px; padding: 16px; background: linear-gradient(135deg, #fff7e6 0%, #ffe7ba 100%); border-radius: 8px;">
                            <div style="font-weight: 600; color: #d46b08; margin-bottom: 8px;">ğŸ’¡ é¢„è­¦å»ºè®®</div>
                            <ul style="margin: 0; padding-left: 20px; font-size: 13px; color: #595959;">
                                <li>é«˜é£é™©é¢„è­¦å»ºè®®24å°æ—¶å†…é€šçŸ¥åˆä½œæœºæ„</li>
                                <li>å·²æˆä¿¡å®¢æˆ·å‡ºç°é¢„è­¦éœ€é‡ç‚¹è·Ÿè¸ª</li>
                                <li>è¿ç»­å‡ºç°é¢„è­¦çš„åŒºåŸŸ/è¡Œä¸šéœ€è¯„ä¼°è§„åˆ™</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // é¢„è­¦æ•°æ®ï¼ˆå«æ¨é€çŠ¶æ€å’Œé“¶è¡Œåé¦ˆï¼‰
        const alerts = [
            {
                id: 1, company: 'è‹å·æŸç²¾å¯†æœºæ¢°æœ‰é™å…¬å¸', level: 'high', levelText: 'é«˜é£é™©',
                type: 'æ–°å¢è¢«æ‰§è¡Œäººä¿¡æ¯', org: 'æ±Ÿè‹é“¶è¡Œ', pushTime: '2026-02-01',
                marketingStatus: 'å·²æ„å‘', timeAgo: '2å°æ—¶å‰',
                pushed: true, pushedTime: '2026-02-11 14:30',
                bankFeedback: 'pending', bankFeedbackText: 'é“¶è¡Œå¾…å¤„ç†'
            },
            {
                id: 2, company: 'å—äº¬æŸå»ºæè´¸æ˜“æœ‰é™å…¬å¸', level: 'high', levelText: 'é«˜é£é™©',
                type: 'æ³•äººå˜æ›´', org: 'å—äº¬é“¶è¡Œ', pushTime: '2026-01-28',
                marketingStatus: 'å·²ç”³è¯·', timeAgo: '5å°æ—¶å‰',
                pushed: true, pushedTime: '2026-02-10 10:00',
                bankFeedback: 'pending', bankFeedbackText: 'é“¶è¡Œå¾…å¤„ç†'
            },
            {
                id: 3, company: 'å¸¸å·æŸç”µå­ç§‘æŠ€æœ‰é™å…¬å¸', level: 'medium', levelText: 'ä¸­é£é™©',
                type: 'è¡Œæ”¿å¤„ç½šï¼ˆç¯ä¿ï¼‰', org: 'è‹å·å†œå•†è¡Œ', pushTime: '2026-02-03',
                marketingStatus: 'å·²è§¦è¾¾', timeAgo: '1å¤©å‰',
                pushed: false, pushedTime: null,
                bankFeedback: null, bankFeedbackText: null
            },
            {
                id: 4, company: 'æ— é”¡æŸæ™ºèƒ½è£…å¤‡æœ‰é™å…¬å¸', level: 'medium', levelText: 'ä¸­é£é™©',
                type: 'è‚¡æƒå˜æ›´', org: 'æ±Ÿè‹é“¶è¡Œ', pushTime: '2026-01-25',
                marketingStatus: 'å·²æˆä¿¡', timeAgo: '2å¤©å‰',
                pushed: true, pushedTime: '2026-02-08 16:00',
                bankFeedback: 'processed', bankFeedbackText: 'é“¶è¡Œå·²å¤„ç†'
            }
        ];

        // æ¸²æŸ“é¢„è­¦åˆ—è¡¨
        function renderAlerts() {
            const container = document.getElementById('alertList');
            container.innerHTML = alerts.map(a => {
                // æ¨é€çŠ¶æ€æ ‡ç­¾
                const pushTag = a.pushed
                    ? `<span class="push-status pushed">âœ“ å·²æ¨é€ ${a.pushedTime}</span>`
                    : `<span class="push-status not-pushed">æœªæ¨é€</span>`;

                // é“¶è¡Œåé¦ˆæ ‡ç­¾
                let feedbackTag = '';
                if (a.pushed && a.bankFeedback) {
                    const cls = a.bankFeedback === 'processed' ? 'processed' : a.bankFeedback === 'paused' ? 'paused' : 'pending';
                    feedbackTag = `<span class="bank-feedback ${cls}">${a.bankFeedbackText}</span>`;
                }

                // é€šçŸ¥æŒ‰é’®
                const pushBtn = a.pushed
                    ? `<button class="btn btn-default btn-sm" disabled style="opacity:0.5;cursor:default;">âœ“ å·²é€šçŸ¥</button>`
                    : `<button class="btn btn-primary btn-sm" onclick="pushToBank(${a.id})">ğŸ“¤ é€šçŸ¥é“¶è¡Œ</button>`;

                return `
                <div class="alert-card ${a.level}">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <div>
                            <div style="font-weight: 600;">${a.level === 'high' ? 'ğŸ”´' : 'ğŸŸ¡'} ${a.company}</div>
                            <div style="font-size: 13px; color: #595959; margin-top: 4px;">
                                <strong>é¢„è­¦ç±»å‹ï¼š</strong>${a.type}
                            </div>
                            <div style="font-size: 12px; color: #8c8c8c; margin-top: 4px;">
                                æ¨é€æœºæ„ï¼š${a.org} | æ¨é€æ—¶é—´ï¼š${a.pushTime} | å½“å‰çŠ¶æ€ï¼š${a.marketingStatus}
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <span class="tag tag-${a.level === 'high' ? 'red' : 'orange'}">${a.levelText}</span>
                            <div style="font-size: 11px; color: #8c8c8c; margin-top: 4px;">${a.timeAgo}</div>
                        </div>
                    </div>
                    <div style="margin-top: 10px; display: flex; gap: 6px; align-items: center; flex-wrap: wrap;">
                        ${pushTag}
                        ${feedbackTag}
                    </div>
                    <div style="margin-top: 12px; display: flex; gap: 8px;">
                        ${pushBtn}
                        <button class="btn btn-default btn-sm">æŸ¥çœ‹è¯¦æƒ…</button>
                        <button class="btn btn-text btn-sm">å¿½ç•¥</button>
                    </div>
                </div>`;
            }).join('');

            updateStats();
        }

        // æ¨é€å•æ¡é¢„è­¦è‡³é“¶è¡Œ
        function pushToBank(id) {
            const a = alerts.find(x => x.id === id);
            if (!a || a.pushed) return;
            a.pushed = true;
            a.pushedTime = '2026-02-13 16:12';
            a.bankFeedback = 'pending';
            a.bankFeedbackText = 'é“¶è¡Œå¾…å¤„ç†';
            showToast(`å·²æ¨é€ã€Œ${a.company}ã€é¢„è­¦è‡³ ${a.org}`);
            renderAlerts();
        }

        // ä¸€é”®æ¨é€å…¨éƒ¨æœªé€šçŸ¥é¢„è­¦
        function pushAllToBank() {
            const unpushed = alerts.filter(a => !a.pushed);
            if (unpushed.length === 0) {
                showToast('æ‰€æœ‰é¢„è­¦å‡å·²æ¨é€');
                return;
            }
            unpushed.forEach(a => {
                a.pushed = true;
                a.pushedTime = '2026-02-13 16:12';
                a.bankFeedback = 'pending';
                a.bankFeedbackText = 'é“¶è¡Œå¾…å¤„ç†';
            });
            showToast(`å·²æ‰¹é‡æ¨é€ ${unpushed.length} æ¡é¢„è­¦è‡³å¯¹åº”é“¶è¡Œ`);
            renderAlerts();
        }

        // å…¨éƒ¨æ ‡ä¸ºå·²è¯»
        function markAllRead() {
            showToast('å·²å…¨éƒ¨æ ‡ä¸ºå·²è¯»');
        }

        // æ›´æ–°ç»Ÿè®¡
        function updateStats() {
            const pushed = alerts.filter(a => a.pushed).length;
            document.getElementById('statPushed').innerHTML = `${pushed}<span class="stat-suffix">æ¡</span>`;
        }

        // Toast
        function showToast(msg) {
            const t = document.createElement('div');
            t.className = 'toast';
            t.textContent = 'âœ“ ' + msg;
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 2500);
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => renderAlerts());
    </script>
</body>

</html>