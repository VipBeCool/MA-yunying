<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº§å“é…ç½® - è¿è¥ç®¡æ§å°</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .sidebar {
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
        }

        .nav-item.active {
            background: rgba(82, 196, 26, 0.2);
            border-left-color: #52c41a;
        }

        .logo-icon {
            background: #52c41a;
        }

        /* äº§å“çŠ¶æ€æ ‡ç­¾ */
        .status-tag {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-tag.running {
            background: #f6ffed;
            color: #52c41a;
        }

        .status-tag.paused {
            background: #fff7e6;
            color: #fa8c16;
        }

        .status-tag.offline {
            background: #f5f5f5;
            color: #bfbfbf;
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: inline-block;
        }

        .status-dot.running {
            background: #52c41a;
            animation: blink 1.5s infinite;
        }

        .status-dot.paused {
            background: #fa8c16;
        }

        .status-dot.offline {
            background: #bfbfbf;
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.4;
            }
        }

        .freq-tag {
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            background: #e6f7ff;
            color: #1890ff;
            font-weight: 500;
        }

        .time-text {
            font-size: 12px;
            color: #8c8c8c;
        }

        /* å¼¹çª— */
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: flex-start;
            padding-top: 40px;
            overflow-y: auto;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background: #fff;
            border-radius: 16px;
            width: 760px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid #f0f0f0;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            color: #262626;
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            color: #8c8c8c;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: #f5f5f5;
            color: #262626;
        }

        .modal-body {
            padding: 24px;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            padding: 16px 24px;
            border-top: 1px solid #f0f0f0;
        }

        /* è¡¨å•åŒºåŸŸ */
        .form-section {
            margin-bottom: 28px;
        }

        .form-section-title {
            font-size: 15px;
            font-weight: 600;
            color: #262626;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-section-title .icon {
            font-size: 18px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .form-grid.col-3 {
            grid-template-columns: 1fr 1fr 1fr;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            font-size: 13px;
            font-weight: 500;
            color: #595959;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 8px 12px;
            border: 1px solid #d9d9d9;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.2s;
            background: #fff;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: #1890ff;
            outline: none;
            box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 60px;
        }

        /* å•é€‰æŒ‰é’®ç»„ */
        .radio-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            border: 1px solid #d9d9d9;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }

        .radio-item:hover {
            border-color: #91d5ff;
        }

        .radio-item.selected {
            border-color: #1890ff;
            background: #e6f7ff;
            color: #1890ff;
            font-weight: 500;
        }

        .radio-item input[type="radio"] {
            accent-color: #1890ff;
            width: 14px;
            height: 14px;
        }

        /* å­—æ®µæƒé™å¤é€‰æ¡† */
        .field-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .field-check {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }

        .field-check:hover {
            border-color: #91d5ff;
        }

        .field-check.checked {
            border-color: #1890ff;
            background: #f0f8ff;
        }

        .field-check input[type="checkbox"] {
            accent-color: #1890ff;
            width: 15px;
            height: 15px;
        }

        .field-check .field-icon {
            font-size: 14px;
        }

        /* è§„åˆ™æ‘˜è¦ */
        .rule-summary {
            background: #fafafa;
            border: 1px solid #e8e8e8;
            border-radius: 10px;
            padding: 14px 16px;
        }

        .rule-summary .rule-name {
            font-weight: 600;
            font-size: 14px;
            color: #262626;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .rule-summary .rule-conditions {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .rule-cond-tag {
            padding: 3px 10px;
            background: #e6f7ff;
            color: #1890ff;
            border-radius: 6px;
            font-size: 12px;
        }

        /* åˆ†éš”çº¿ */
        .form-divider {
            height: 1px;
            background: #f0f0f0;
            margin: 24px 0;
        }

        /* å¼€å…³æ ·å¼ */
        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
            display: inline-block;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            inset: 0;
            background: #d9d9d9;
            border-radius: 24px;
            transition: 0.3s;
        }

        .toggle-slider:before {
            content: "";
            position: absolute;
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background: white;
            border-radius: 50%;
            transition: 0.3s;
        }

        .toggle-switch input:checked+.toggle-slider {
            background: #52c41a;
        }

        .toggle-switch input:checked+.toggle-slider:before {
            transform: translateX(20px);
        }

        .toggle-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0;
        }

        .toggle-label {
            font-size: 13px;
            color: #595959;
        }

        /* Toast */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #52c41a;
            color: #fff;
            padding: 12px 24px;
            border-radius: 8px;
            z-index: 9999;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="sidebar-logo">
                <div class="logo-icon">âš™ï¸</div>
                <h1>è¿è¥ç®¡æ§å°</h1>
            </div>
            
            <nav class="nav-menu">
                <a href="index.html" class="nav-item "><span class="nav-icon">ğŸ“Š</span><span class="nav-text">è¿è¥æ¦‚è§ˆ</span></a>
                
                <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 8px 16px;"></div>
                <div style="font-size: 12px; color: rgba(255,255,255,0.45); padding: 8px 24px; margin-top: 4px;">æ•°æ®äº¤ä»˜</div>
                <a href="smart-search.html" class="nav-item "><span class="nav-icon">ğŸ¯</span><span class="nav-text">æ™ºèƒ½æ¢å®¢</span></a>
                <a href="batch-enrich.html" class="nav-item "><span class="nav-icon">ğŸ“‘</span><span class="nav-text">æ‰¹é‡ç”»åƒæŸ¥è¯¢</span></a>
                
                <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 8px 16px;"></div>
                <div style="font-size: 12px; color: rgba(255,255,255,0.45); padding: 8px 24px; margin-top: 4px;">ä¸šåŠ¡ç®¡ç†</div>
                <a href="institutions.html" class="nav-item "><span class="nav-icon">ğŸ›ï¸</span><span class="nav-text">æœºæ„ç®¡ç†</span></a>
                <a href="customer-pool.html" class="nav-item "><span class="nav-icon">ğŸŠ</span><span class="nav-text">å®¢æˆ·æ± </span></a>
                <a href="products.html" class="nav-item active"><span class="nav-icon">ğŸ“¦</span><span class="nav-text">äº§å“é…ç½®</span></a>
                <a href="rules.html" class="nav-item "><span class="nav-icon">ğŸ¯</span><span class="nav-text">è§„åˆ™å¼•æ“</span></a>
                <a href="distribution.html" class="nav-item "><span class="nav-icon">ğŸ”€</span><span class="nav-text">åˆ†å‘ç®¡ç†</span></a>
                <a href="analytics.html" class="nav-item "><span class="nav-icon">ğŸ“ˆ</span><span class="nav-text">æ•ˆæœåˆ†æ</span></a>
                <a href="billing.html" class="nav-item "><span class="nav-icon">ğŸ’°</span><span class="nav-text">æ”¶è´¹ç»“ç®—</span></a>
                <a href="reconciliation.html" class="nav-item "><span class="nav-icon">ğŸ“‘</span><span class="nav-text">å¯¹è´¦ç®¡ç†</span></a>
                <a href="risk-alert.html" class="nav-item "><span class="nav-icon">âš ï¸</span><span class="nav-text">é£é™©é¢„è­¦</span></a>
                
                <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 8px 16px;"></div>
                <div style="font-size: 12px; color: rgba(255,255,255,0.45); padding: 8px 24px; margin-top: 4px;">ç³»ç»Ÿé…ç½®</div>
                <a href="api-monitor.html" class="nav-item "><span class="nav-icon">ğŸ”Œ</span><span class="nav-text">APIç›‘æ§</span></a>
                <a href="downloads.html" class="nav-item "><span class="nav-icon">ğŸ“¥</span><span class="nav-text">ä¸‹è½½ä¸­å¿ƒ</span></a>
            </nav>
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar" style="background: #52c41a;">ç®¡</div>
                    <div>
                        <div class="user-name">ç®¡ç†å‘˜</div>
                        <div class="user-role">å¹³å°è¿è¥</div>
                    </div>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <div class="page-header" style="display:flex;justify-content:space-between;align-items:center;">
                <div>
                    <h2>äº§å“é…ç½®</h2>
                    <div class="breadcrumb">è¿è¥ç®¡æ§å° / äº§å“é…ç½®</div>
                </div>
                <button class="btn btn-primary" onclick="openProductModal()">+ æ–°å¢äº§å“</button>
            </div>

            <!-- ç­›é€‰æ  -->
            <div class="filter-bar">
                <div class="filter-item">
                    <label>æ‰€å±æœºæ„</label>
                    <select class="form-select" id="filterOrg" onchange="filterProducts()">
                        <option value="">å…¨éƒ¨æœºæ„</option>
                        <option>æ±Ÿè‹é“¶è¡Œ</option>
                        <option>å—äº¬é“¶è¡Œ</option>
                        <option>è‹å·å†œå•†è¡Œ</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>äº§å“ç±»å‹</label>
                    <select class="form-select" id="filterType" onchange="filterProducts()">
                        <option value="">å…¨éƒ¨ç±»å‹</option>
                        <option>ä¿¡ç”¨è´·</option>
                        <option>æŠµæŠ¼è´·</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>çŠ¶æ€</label>
                    <select class="form-select" id="filterStatus" onchange="filterProducts()">
                        <option value="">å…¨éƒ¨çŠ¶æ€</option>
                        <option value="running">è¿è¡Œä¸­</option>
                        <option value="paused">å·²æš‚åœ</option>
                        <option value="offline">å·²ä¸‹çº¿</option>
                    </select>
                </div>
            </div>

            <!-- äº§å“åˆ—è¡¨ -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">äº§å“åˆ—è¡¨</h3>
                    <span class="card-extra" id="productCount">å…± 6 ä¸ªäº§å“</span>
                </div>
                <div class="table-wrapper">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>äº§å“åç§°</th>
                                <th>æ‰€å±æœºæ„</th>
                                <th>ç±»å‹</th>
                                <th>çŠ¶æ€</th>
                                <th>æ‰§è¡Œé¢‘ç‡</th>
                                <th>ä¸Šæ¬¡æ‰§è¡Œ</th>
                                <th>ä¸‹æ¬¡æ‰§è¡Œ</th>
                                <th>æ¨é€é‡</th>
                                <th>è½¬åŒ–ç‡</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="productTableBody">
                            <!-- åŠ¨æ€æ¸²æŸ“ -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- äº§å“ç¼–è¾‘/æ–°å¢å¼¹çª— -->
    <div class="modal-overlay" id="productModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">ğŸ“¦ æ–°å¢è·å®¢äº§å“</h3>
                <div class="modal-close" onclick="closeProductModal()">âœ•</div>
            </div>
            <div class="modal-body">
                <!-- åŒºåŸŸAï¼šåŸºæœ¬ä¿¡æ¯ -->
                <div class="form-section">
                    <div class="form-section-title"><span class="icon">ğŸ“‹</span> åŸºæœ¬ä¿¡æ¯</div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>äº§å“åç§°</label>
                            <input type="text" id="prodName" placeholder="å¦‚ï¼šç§‘æŠ€è´·">
                        </div>
                        <div class="form-group">
                            <label>æ‰€å±æœºæ„</label>
                            <select id="prodOrg">
                                <option>æ±Ÿè‹é“¶è¡Œ</option>
                                <option>å—äº¬é“¶è¡Œ</option>
                                <option>è‹å·å†œå•†è¡Œ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>äº§å“ç±»å‹</label>
                            <select id="prodType">
                                <option>ä¿¡ç”¨è´·</option>
                                <option>æŠµæŠ¼è´·</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>å‡†å…¥è¯„åˆ†</label>
                            <input type="text" id="prodScore" placeholder="å¦‚ï¼šâ‰¥750">
                        </div>
                        <div class="form-group">
                            <label>æœ€é«˜é¢åº¦</label>
                            <input type="text" id="prodLimit" placeholder="å¦‚ï¼š500ä¸‡">
                        </div>
                        <div class="form-group">
                            <label>åˆ©ç‡åŒºé—´</label>
                            <input type="text" id="prodRate" placeholder="å¦‚ï¼š4.5%-5.5%">
                        </div>
                        <div class="form-group full-width">
                            <label>äº§å“æè¿°</label>
                            <textarea id="prodDesc" placeholder="é¢å‘ç§‘æŠ€å‹ä¼ä¸šçš„ä¸“é¡¹ä¿¡è´·äº§å“..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-divider"></div>

                <!-- åŒºåŸŸBï¼šè°ƒåº¦ç­–ç•¥ -->
                <div class="form-section">
                    <div class="form-section-title"><span class="icon">â°</span> è°ƒåº¦ç­–ç•¥</div>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label>æ‰§è¡Œé¢‘ç‡</label>
                            <div class="radio-group" id="freqGroup">
                                <label class="radio-item selected" onclick="selectRadio(this,'freq')">
                                    <input type="radio" name="freq" value="daily" checked> æ¯å¤©
                                </label>
                                <label class="radio-item" onclick="selectRadio(this,'freq')">
                                    <input type="radio" name="freq" value="weekly"> æ¯å‘¨
                                </label>
                                <label class="radio-item" onclick="selectRadio(this,'freq')">
                                    <input type="radio" name="freq" value="monthly"> æ¯æœˆ
                                </label>
                                <label class="radio-item" onclick="selectRadio(this,'freq')">
                                    <input type="radio" name="freq" value="once"> ä»…ä¸€æ¬¡
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>æ‰§è¡Œæ—¶é—´</label>
                            <input type="time" id="prodTime" value="06:00">
                        </div>
                        <div class="form-group">
                            <label>è¾“å‡ºä¸Šé™ï¼ˆæ¡/æ¬¡ï¼‰</label>
                            <input type="number" id="prodMaxOutput" value="500" min="1" max="10000">
                        </div>
                        <div class="form-group">
                            <label>åå•æ’åº</label>
                            <select id="prodSortBy">
                                <option>è‹ä¿¡åˆ†ç”±é«˜åˆ°ä½</option>
                                <option>èµ„é‡‘éœ€æ±‚é¢„ä¼°ç”±é«˜åˆ°ä½</option>
                                <option>æ³¨å†Œèµ„é‡‘ç”±é«˜åˆ°ä½</option>
                                <option>ä¼ä¸šæˆç«‹æ—¶é—´ç”±è¿‘åˆ°è¿œ</option>
                                <option>ç»¼åˆæ¨èåº¦</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>åå•å¤„ç†</label>
                            <select id="prodListProcess">
                                <option>ä¸å¤„ç†ï¼ˆå…¨é‡è¾“å‡ºï¼‰</option>
                                <option>æ’é™¤å·²æœ‰åå•å®¢æˆ·</option>
                                <option>æ’é™¤å·²è§¦è¾¾å®¢æˆ·</option>
                                <option>ä¸ä¸Šä¼ åå•å–äº¤é›†</option>
                                <option>æ’é™¤ä¸Šä¼ åå•å®¢æˆ·</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-divider"></div>

                <!-- åŒºåŸŸCï¼šæƒé™æ§åˆ¶ -->
                <div class="form-section">
                    <div class="form-section-title"><span class="icon">ğŸ”’</span> æƒé™æ§åˆ¶</div>
                    <div class="toggle-row">
                        <span class="toggle-label">å…è®¸æœºæ„å¯¼å‡ºåå•</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="allowExport">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div style="margin-top:16px;">
                        <label
                            style="font-size:13px;font-weight:500;color:#595959;margin-bottom:10px;display:block;">åå•å±•ç¤ºå­—æ®µ</label>
                        <div class="field-grid" id="fieldGrid">
                            <label class="field-check checked">
                                <input type="checkbox" checked disabled> <span class="field-icon">ğŸ¢</span> ä¼ä¸šåç§°
                            </label>
                            <label class="field-check checked">
                                <input type="checkbox" checked disabled> <span class="field-icon">ğŸ†”</span>
                                ç»Ÿä¸€ç¤¾ä¼šä¿¡ç”¨ä»£ç 
                            </label>
                            <label class="field-check checked" onclick="toggleField(this)">
                                <input type="checkbox" checked> <span class="field-icon">ğŸ“</span> è”ç³»æ–¹å¼
                            </label>
                            <label class="field-check" onclick="toggleField(this)">
                                <input type="checkbox"> <span class="field-icon">ğŸ“Š</span> è‹ä¿¡åˆ†
                            </label>
                            <label class="field-check" onclick="toggleField(this)">
                                <input type="checkbox"> <span class="field-icon">ğŸ’¼</span> å¾ä¿¡æ¦‚è¦
                            </label>
                            <label class="field-check" onclick="toggleField(this)">
                                <input type="checkbox"> <span class="field-icon">âš–ï¸</span> å¸æ³•é£é™©è¯¦æƒ…
                            </label>
                            <label class="field-check" onclick="toggleField(this)">
                                <input type="checkbox"> <span class="field-icon">ğŸ’°</span> è´¢åŠ¡æ•°æ®
                            </label>
                            <label class="field-check" onclick="toggleField(this)">
                                <input type="checkbox"> <span class="field-icon">ğŸ“</span> çº³ç¨è¯„çº§
                            </label>
                            <label class="field-check" onclick="toggleField(this)">
                                <input type="checkbox"> <span class="field-icon">ğŸ­</span> è¡Œä¸šåˆ†ç±»
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-divider"></div>

                <!-- åŒºåŸŸDï¼šå…³è”è§„åˆ™ -->
                <div class="form-section">
                    <div class="form-section-title"><span class="icon">ğŸ¯</span> å…³è”è§„åˆ™</div>
                    <div class="form-group" style="margin-bottom:12px;">
                        <label>é€‰æ‹©è§„åˆ™</label>
                        <select id="prodRule" onchange="updateRuleSummary()">
                            <option value="rule1">ç§‘æŠ€ä¼ä¸šç­›é€‰è§„åˆ™</option>
                            <option value="rule2">ç¨åŠ¡ä¼˜è´¨ä¼ä¸šè§„åˆ™</option>
                            <option value="rule3">ä¸“ç²¾ç‰¹æ–°ä¼ä¸šè§„åˆ™</option>
                            <option value="rule4">å›­åŒºé‡ç‚¹ä¼ä¸šè§„åˆ™</option>
                            <option value="">+ è·³è½¬åˆ›å»ºæ–°è§„åˆ™</option>
                        </select>
                    </div>
                    <div class="rule-summary" id="ruleSummary">
                        <div class="rule-name">ğŸ¯ ç§‘æŠ€ä¼ä¸šç­›é€‰è§„åˆ™</div>
                        <div class="rule-conditions">
                            <span class="rule-cond-tag">è¡Œä¸š = åˆ¶é€ ä¸š / ç§‘æŠ€æœåŠ¡</span>
                            <span class="rule-cond-tag">è‹ä¿¡åˆ† â‰¥ 750</span>
                            <span class="rule-cond-tag">æ³¨å†Œèµ„é‡‘ â‰¥ 500ä¸‡</span>
                            <span class="rule-cond-tag">æˆç«‹å¹´é™ â‰¥ 3å¹´</span>
                            <span class="rule-cond-tag">æ— å¸æ³•é£é™©</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" onclick="closeProductModal()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="saveProduct()">ä¿å­˜äº§å“</button>
            </div>
        </div>
    </div>

    <script>
        // äº§å“ mock æ•°æ®
        const products = [
            {
                id: 1, name: 'ç§‘æŠ€è´·', org: 'æ±Ÿè‹é“¶è¡Œ', type: 'ä¿¡ç”¨è´·', status: 'running',
                score: 'â‰¥750', limit: '500ä¸‡', rate: '4.5%-5.5%',
                freq: 'æ¯å¤©', freqVal: 'daily', time: '06:00', maxOutput: 500,
                sortBy: 'è‹ä¿¡åˆ†ç”±é«˜åˆ°ä½', listProcess: 'æ’é™¤å·²è§¦è¾¾å®¢æˆ·',
                allowExport: true, pushCount: 5000, conversion: '4.2%',
                lastRun: '2026-02-11 06:00', nextRun: '2026-02-12 06:00',
                rule: 'ç§‘æŠ€ä¼ä¸šç­›é€‰è§„åˆ™',
                conditions: ['è¡Œä¸š=åˆ¶é€ ä¸š/ç§‘æŠ€æœåŠ¡', 'è‹ä¿¡åˆ†â‰¥750', 'æ³¨å†Œèµ„é‡‘â‰¥500ä¸‡']
            },
            {
                id: 2, name: 'ç¨eè', org: 'æ±Ÿè‹é“¶è¡Œ', type: 'ä¿¡ç”¨è´·', status: 'running',
                score: 'â‰¥700', limit: '300ä¸‡', rate: '5.0%-6.0%',
                freq: 'æ¯å‘¨', freqVal: 'weekly', time: '07:00', maxOutput: 300,
                sortBy: 'ç»¼åˆæ¨èåº¦', listProcess: 'æ’é™¤å·²æœ‰åå•å®¢æˆ·',
                allowExport: false, pushCount: 4000, conversion: '3.8%',
                lastRun: '2026-02-10 07:00', nextRun: '2026-02-17 07:00',
                rule: 'ç¨åŠ¡ä¼˜è´¨ä¼ä¸šè§„åˆ™',
                conditions: ['çº³ç¨è¯„çº§=A/B', 'è‹ä¿¡åˆ†â‰¥700', 'è¿ç»­çº³ç¨â‰¥2å¹´']
            },
            {
                id: 3, name: 'ä¸“ç²¾ç‰¹æ–°è´·', org: 'å—äº¬é“¶è¡Œ', type: 'ä¿¡ç”¨è´·', status: 'running',
                score: 'â‰¥720', limit: '800ä¸‡', rate: '4.8%-5.8%',
                freq: 'æ¯æœˆ', freqVal: 'monthly', time: '08:00', maxOutput: 200,
                sortBy: 'èµ„é‡‘éœ€æ±‚é¢„ä¼°ç”±é«˜åˆ°ä½', listProcess: 'ä¸å¤„ç†ï¼ˆå…¨é‡è¾“å‡ºï¼‰',
                allowExport: true, pushCount: 4500, conversion: '4.0%',
                lastRun: '2026-02-01 08:00', nextRun: '2026-03-01 08:00',
                rule: 'ä¸“ç²¾ç‰¹æ–°ä¼ä¸šè§„åˆ™',
                conditions: ['ä¸“ç²¾ç‰¹æ–°è®¤å®š', 'è‹ä¿¡åˆ†â‰¥720', 'ç ”å‘æŠ•å…¥å æ¯”â‰¥5%']
            },
            {
                id: 4, name: 'å›­åŒºè´·', org: 'è‹å·å†œå•†è¡Œ', type: 'æŠµæŠ¼è´·', status: 'paused',
                score: 'â‰¥680', limit: '1000ä¸‡', rate: '5.5%-6.5%',
                freq: 'æ¯å¤©', freqVal: 'daily', time: '06:30', maxOutput: 400,
                sortBy: 'æ³¨å†Œèµ„é‡‘ç”±é«˜åˆ°ä½', listProcess: 'æ’é™¤å·²æœ‰åå•å®¢æˆ·',
                allowExport: false, pushCount: 3500, conversion: '3.2%',
                lastRun: '2026-02-05 06:30', nextRun: 'â€”',
                rule: 'å›­åŒºé‡ç‚¹ä¼ä¸šè§„åˆ™',
                conditions: ['å…¥é©»å›­åŒº', 'è‹ä¿¡åˆ†â‰¥680', 'æœ‰ä¸åŠ¨äº§']
            },
            {
                id: 5, name: 'å¤–è´¸é€š', org: 'æ±Ÿè‹é“¶è¡Œ', type: 'ä¿¡ç”¨è´·', status: 'running',
                score: 'â‰¥710', limit: '600ä¸‡', rate: '4.8%-5.5%',
                freq: 'æ¯å‘¨', freqVal: 'weekly', time: '07:30', maxOutput: 350,
                sortBy: 'è‹ä¿¡åˆ†ç”±é«˜åˆ°ä½', listProcess: 'æ’é™¤å·²è§¦è¾¾å®¢æˆ·',
                allowExport: true, pushCount: 2800, conversion: '3.5%',
                lastRun: '2026-02-10 07:30', nextRun: '2026-02-17 07:30',
                rule: 'å¤–è´¸ä¼ä¸šç­›é€‰è§„åˆ™',
                conditions: ['æœ‰è¿›å‡ºå£ç»è¥æƒ', 'è‹ä¿¡åˆ†â‰¥710', 'å¹´å‡ºå£é¢â‰¥100ä¸‡$']
            },
            {
                id: 6, name: 'ç»¿è‰²ä¿¡è´·', org: 'å—äº¬é“¶è¡Œ', type: 'ä¿¡ç”¨è´·', status: 'offline',
                score: 'â‰¥700', limit: '400ä¸‡', rate: '4.2%-5.0%',
                freq: 'ä»…ä¸€æ¬¡', freqVal: 'once', time: '09:00', maxOutput: 1000,
                sortBy: 'ç»¼åˆæ¨èåº¦', listProcess: 'ä¸å¤„ç†ï¼ˆå…¨é‡è¾“å‡ºï¼‰',
                allowExport: false, pushCount: 1200, conversion: '2.8%',
                lastRun: '2026-01-15 09:00', nextRun: 'â€”',
                rule: 'ç»¿è‰²ä¼ä¸šç­›é€‰è§„åˆ™',
                conditions: ['ç¯ä¿è®¤è¯', 'èƒ½è€—è¾¾æ ‡', 'è‹ä¿¡åˆ†â‰¥700']
            }
        ];

        const statusMap = {
            running: { label: 'è¿è¡Œä¸­', cls: 'running' },
            paused: { label: 'å·²æš‚åœ', cls: 'paused' },
            offline: { label: 'å·²ä¸‹çº¿', cls: 'offline' }
        };

        // è§„åˆ™æ‘˜è¦æ•°æ®
        const ruleSummaries = {
            rule1: { name: 'ç§‘æŠ€ä¼ä¸šç­›é€‰è§„åˆ™', conditions: ['è¡Œä¸š = åˆ¶é€ ä¸š / ç§‘æŠ€æœåŠ¡', 'è‹ä¿¡åˆ† â‰¥ 750', 'æ³¨å†Œèµ„é‡‘ â‰¥ 500ä¸‡', 'æˆç«‹å¹´é™ â‰¥ 3å¹´', 'æ— å¸æ³•é£é™©'] },
            rule2: { name: 'ç¨åŠ¡ä¼˜è´¨ä¼ä¸šè§„åˆ™', conditions: ['çº³ç¨è¯„çº§ = A / B', 'è‹ä¿¡åˆ† â‰¥ 700', 'è¿ç»­çº³ç¨ â‰¥ 2å¹´', 'æ— æ¬ ç¨è®°å½•'] },
            rule3: { name: 'ä¸“ç²¾ç‰¹æ–°ä¼ä¸šè§„åˆ™', conditions: ['ä¸“ç²¾ç‰¹æ–°è®¤å®š', 'è‹ä¿¡åˆ† â‰¥ 720', 'ç ”å‘æŠ•å…¥å æ¯” â‰¥ 5%', 'æœ‰æ•ˆä¸“åˆ© â‰¥ 3é¡¹'] },
            rule4: { name: 'å›­åŒºé‡ç‚¹ä¼ä¸šè§„åˆ™', conditions: ['å…¥é©»çœçº§ä»¥ä¸Šå›­åŒº', 'è‹ä¿¡åˆ† â‰¥ 680', 'æœ‰ä¸åŠ¨äº§', 'åœ¨è¥çŠ¶æ€'] }
        };

        // æ¸²æŸ“äº§å“åˆ—è¡¨
        function renderProducts(data) {
            const tbody = document.getElementById('productTableBody');
            document.getElementById('productCount').textContent = `å…± ${data.length} ä¸ªäº§å“`;
            tbody.innerHTML = data.map(p => {
                const s = statusMap[p.status];
                return `<tr>
                    <td><span class="company-name">${p.name}</span></td>
                    <td>${p.org}</td>
                    <td><span class="tag ${p.type === 'ä¿¡ç”¨è´·' ? 'tag-blue' : 'tag-green'}">${p.type}</span></td>
                    <td><span class="status-tag ${s.cls}"><span class="status-dot ${s.cls}"></span> ${s.label}</span></td>
                    <td><span class="freq-tag">${p.freq}</span></td>
                    <td><span class="time-text">${p.lastRun}</span></td>
                    <td><span class="time-text">${p.nextRun}</span></td>
                    <td>${p.pushCount.toLocaleString()}</td>
                    <td style="color:${parseFloat(p.conversion) >= 4 ? '#52c41a' : '#1890ff'};font-weight:600;">${p.conversion}</td>
                    <td>
                        <button class="btn btn-text btn-sm" onclick="editProduct(${p.id})">ç¼–è¾‘</button>
                        <button class="btn btn-text btn-sm" onclick="toggleProductStatus(${p.id})">${p.status === 'running' ? 'æš‚åœ' : 'å¯ç”¨'}</button>
                        <button class="btn btn-text btn-sm" onclick="location.href='rules.html'">è§„åˆ™</button>
                    </td>
                </tr>`;
            }).join('');
        }

        // ç­›é€‰
        function filterProducts() {
            let filtered = [...products];
            const org = document.getElementById('filterOrg').value;
            const type = document.getElementById('filterType').value;
            const status = document.getElementById('filterStatus').value;
            if (org) filtered = filtered.filter(p => p.org === org);
            if (type) filtered = filtered.filter(p => p.type === type);
            if (status) filtered = filtered.filter(p => p.status === status);
            renderProducts(filtered);
        }

        // å¼¹çª—
        function openProductModal(title) {
            document.getElementById('modalTitle').textContent = title || 'ğŸ“¦ æ–°å¢è·å®¢äº§å“';
            document.getElementById('productModal').classList.add('show');
        }

        function closeProductModal() {
            document.getElementById('productModal').classList.remove('show');
        }

        // ç¼–è¾‘äº§å“
        function editProduct(id) {
            const p = products.find(x => x.id === id);
            if (!p) return;
            document.getElementById('prodName').value = p.name;
            document.getElementById('prodScore').value = p.score;
            document.getElementById('prodLimit').value = p.limit;
            document.getElementById('prodRate').value = p.rate;
            document.getElementById('prodTime').value = p.time;
            document.getElementById('prodMaxOutput').value = p.maxOutput;
            // é€‰ä¸­å¯¹åº”é¢‘ç‡
            document.querySelectorAll('#freqGroup .radio-item').forEach(r => {
                const input = r.querySelector('input');
                if (input.value === p.freqVal) {
                    r.classList.add('selected');
                    input.checked = true;
                } else {
                    r.classList.remove('selected');
                    input.checked = false;
                }
            });
            document.getElementById('allowExport').checked = p.allowExport;
            openProductModal('ğŸ“¦ ç¼–è¾‘äº§å“ - ' + p.name);
        }

        // åˆ‡æ¢äº§å“çŠ¶æ€
        function toggleProductStatus(id) {
            const p = products.find(x => x.id === id);
            if (!p) return;
            if (p.status === 'running') {
                p.status = 'paused';
                p.nextRun = 'â€”';
                showToast(`å·²æš‚åœäº§å“ã€Œ${p.name}ã€`);
            } else {
                p.status = 'running';
                p.nextRun = '2026-02-12 06:00';
                showToast(`å·²å¯ç”¨äº§å“ã€Œ${p.name}ã€`);
            }
            renderProducts(products);
        }

        // å•é€‰
        function selectRadio(el, name) {
            el.closest('.radio-group').querySelectorAll('.radio-item').forEach(r => r.classList.remove('selected'));
            el.classList.add('selected');
        }

        // å­—æ®µæƒé™åˆ‡æ¢
        function toggleField(el) {
            const cb = el.querySelector('input[type="checkbox"]');
            if (cb.disabled) return;
            cb.checked = !cb.checked;
            el.classList.toggle('checked', cb.checked);
        }

        // è§„åˆ™æ‘˜è¦æ›´æ–°
        function updateRuleSummary() {
            const val = document.getElementById('prodRule').value;
            const el = document.getElementById('ruleSummary');
            if (!val) {
                location.href = 'rules.html';
                return;
            }
            const r = ruleSummaries[val];
            if (r) {
                el.innerHTML = `<div class="rule-name">ğŸ¯ ${r.name}</div>
                    <div class="rule-conditions">${r.conditions.map(c => `<span class="rule-cond-tag">${c}</span>`).join('')}</div>`;
            }
        }

        // ä¿å­˜
        function saveProduct() {
            const name = document.getElementById('prodName').value;
            if (!name) { alert('è¯·è¾“å…¥äº§å“åç§°'); return; }
            closeProductModal();
            showToast(`äº§å“ã€Œ${name}ã€ä¿å­˜æˆåŠŸ`);
        }

        // Toast
        function showToast(msg) {
            const t = document.createElement('div');
            t.className = 'toast';
            t.textContent = 'âœ“ ' + msg;
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 2500);
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => renderProducts(products));
    </script>
</body>

</html>